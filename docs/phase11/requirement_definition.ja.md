# Phase 11: YouTubeメタデータ分析の深化 要件定義書

## 1. 背景と目的
現在のScout Systemでは、主に通常動画の再生数や投稿頻度を分析対象としている。しかし、近年は「ショート動画（Shorts）」や「ライブ配信（Live）」がチャンネル成長の主軸となっているケースが多く、これらを含めた多角的なメタデータ分析が不可欠である。本フェーズでは、全ての動画形式のタイトルや投稿傾向を収集し、LLMによる「企画内容」や「ターゲット層」の深い分析を実現する。

## 2. 実装要件

### 2.1 包括的な動画メタデータの取得
`YouTubeCollector` を拡張し、直近動画のリストに通常動画・ライブ配信・ショート動画をバランスよく含める。
- **ライブ配信**: `type=video`, `eventType=completed` または `videoCategoryId` 等でフィルタリングして取得。
- **ショート動画**: 持続時間が短く、縦型アスペクト比を持つ動画（APIでは `duration` や `contentDetails` で判別）。

### 2.2 メタデータ構造の拡張
`ScoreInput` および DB の `scout_snapshots` に格納する動画メタデータを詳細化する。
- 既存の `recent_videos_json` に、動画の種類（`video_type`: 'normal' | 'live' | 'shorts'）を追加。

### 2.3 企画分析プロンプトの更新
`Analyzer` のプロンプトを、取得したタイトル群から以下の要素を抽出するように更新する。
- **企画ジャンル**: どのような企画がメインか（例：歌枠、開封動画、時事解説）。
- **ターゲット属性**: どのような視聴者層を狙っているか。
- **成長要因**: なぜその動画が伸びているか（企画力、サムネイル、トレンド等）。

### 2.4 スコアリング基準の調整
ショート動画が多いチャンネルや、ライブ配信メインのチャンネルでも適切に評価されるよう、合計スコアの計算ロジック（またはLLMへの指示）を調整する。

## 3. 処理フロー案
1.  **Collection**: 通常動画だけでなく、プレイリストや検索APIを組み合わせて複数の形式の動画情報を収集。
2.  **Aggregation**: 収集した多様なタイトルを1つの構造化データにまとめる。
3.  **Analysis**: LLMが「タイトル分布」からクリエイターの戦略を読み解く。
4.  **Reporting**: 分析結果に「主要コンテンツタイプ（例：ライブ中心）」などのタグを付与する。

## 4. 期待される効果
- **分析精度の向上**: 数字だけでなく「何をやっているか」まで踏み込んだ評価が可能になる。
- **見逃し防止**: ショートで急成長しているが通常動画が少ない、といった特異な成長チャンネルを正しく評価できる。
